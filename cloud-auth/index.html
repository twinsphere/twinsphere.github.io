<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://docs.aas.conplement.cloud/cloud-auth/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Authentication - Documentation of twinsphere Suite by conplement AG</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Authentication";
        var mkdocs_page_input_path = "cloud-auth.md";
        var mkdocs_page_url = "/cloud-auth/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../img/twinsphere-logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contact/">Contact us</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">twinsphere ID</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../id-overview/">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-documentation/">API Documentation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Proprietary Features</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-proprietary-features/">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-change-events/">Change Events</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-search/">Search</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-push-service/">Push Service</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-semantic-connector/">Semantic Connector</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-filter-queries/">Shell Filter Queries</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cloud-file-filter-queries/">File Filter Queries</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Authentication</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#identity-provider-federation">Identity provider federation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#microsoft-entra-id-oauth2-federation">Microsoft Entra ID OAuth2 federation</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#app-registration-for-the-twinsphere-api">App registration for the twinsphere API</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#create-and-configure-app-registration-for-viewer-client">Create and configure app registration for viewer client</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-client-generation/">Client Generation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cloud-release-notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Studio</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../studio-overview/">Coming 2025</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Viewer</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../viewer-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../viewer-features/">Features</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../viewer-release-notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Management API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../management-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../management-roles/">Roles</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development Libraries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../typed-aas-metamodels-overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../typed-aas-metamodels-submodels/">Supported Submodels</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../typed-aas-metamodels-validation/">Validation Rules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../typed-aas-metamodels-release_notes/">Release Notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Validators</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../validators-overview/">Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tips & Tricks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../tips-common-validation-errors/">Common Validation Errors</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Documentation of twinsphere Suite by conplement AG</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Cloud</li>
      <li class="breadcrumb-item active">Authentication</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="authentication">Authentication</h1>
<p>twinsphere cloud supports two authentication strategies:</p>
<ul>
<li>using <a href="../id-overview/">twinsphere ID</a>, which is the default built-in authentication provider. Both user and service
account authentication modes are supported, consult the <a href="../id-overview/">twinsphere ID documentation</a> for more information.</li>
<li>using <a href="#identity-provider-federation">identity federation</a> as an additional authentication provider</li>
</ul>
<h2 id="identity-provider-federation">Identity provider federation</h2>
<p>For tighter integration in your authentication and authorization systems, twinsphere cloud supports adding external identity
provider configuration onto the platform.</p>
<blockquote>
<p>You identity provider configuration will be added as an <em>additional</em> configuration, it will not completely replace the
usage of twinsphere ID which is still required for internal purposes!</p>
</blockquote>
<p>Supported authentication providers for twinsphere cloud are:</p>
<ul>
<li><a href="#microsoft-entra-id-oauth2-federation">Microsoft Entra ID OAuth2</a></li>
</ul>
<h3 id="microsoft-entra-id-oauth2-federation">Microsoft Entra ID OAuth2 federation</h3>
<p>The Entra ID (former known as Azure AD) integration allows you to use a Microsoft Entra ID tenant as an identity
provider for twinsphere. Besides allowing your own users to log in, you can also use Entra ID application roles to
assign users and groups to twinsphere roles from your own Microsoft Entra ID portal. You can also connect your Entra ID
applications and fully integrate twinsphere into your ecosystem.</p>
<p>In general, you need to create two Azure app registrations. One for the API service and one for the viewer, which acts
as client for the API. If you don't use the twinsphere viewer, you can skip the viewer configuration section.</p>
<blockquote>
<p><strong>Prerequisites</strong></p>
<p>The following steps require you to sign in as a user that is authorized to consent on behalf of the organization. For
this, a user with the following roles is needed:</p>
<ul>
<li>
<p>Privileged Role Administrator</p>
</li>
<li>
<p>Cloud Application Administrator or Application Administrator</p>
</li>
</ul>
</blockquote>
<ol>
<li>Log in to your <a href="https://entra.microsoft.com/">Microsoft Entra admin center&nbsp;⧉</a></li>
<li>If you have access to more than one tenant, select your account in the upper right. Set your session to the Entra ID
   tenant you wish to use.</li>
</ol>
<h4 id="app-registration-for-the-twinsphere-api">App registration for the twinsphere API</h4>
<ol>
<li>Under <strong>Identity &gt; Applications</strong> in the side menu, click <strong>App registrations &gt; New Registration</strong>. Enter a
   descriptive name e.g. <strong>twinsphere-api-app</strong></li>
<li>As <strong>Supported account types</strong> let the default setting <strong>Accounts in this organizational directory only</strong>.</li>
<li>Click <strong>Register</strong>.</li>
<li>Note the <strong>Application ID</strong>.</li>
<li>Click on <strong>Manifest</strong> and in the Tab <strong>Microsoft Graph App Manifest</strong> change the property
   <strong>requestedAccessTokenVersion</strong> in the json (under <code>api</code>) editor to <strong>2</strong> and hit the <strong>Save</strong> button.</li>
<li>Navigate to <strong>Overview</strong> in the created app registration and click on <strong>Endpoints</strong> in top of the menu.<ul>
<li>Note the <strong>Authority URL (Accounts in this organizational directory only)</strong> URI</li>
</ul>
</li>
<li>
<p>Define the required application roles (under <strong>App roles</strong>).</p>
<table>
<thead>
<tr>
<th>Display name</th>
<th>Value</th>
<th>Description</th>
<th>Allowed member types</th>
</tr>
</thead>
<tbody>
<tr>
<td>Reader</td>
<td>reader</td>
<td>Read data</td>
<td>Both (Users / Groups + Applications)</td>
</tr>
<tr>
<td>Contributor</td>
<td>contributor</td>
<td>Write data</td>
<td>Both (Users / Groups + Applications)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Make sure the values are typed exactly as above (lowercase!).</p>
</blockquote>
</li>
<li>
<p>Click <strong>Expose and API</strong> under <strong>Manage</strong> section.</p>
</li>
<li>Click <strong>Add a scope</strong>.</li>
<li>Leave the <strong>Application ID URI</strong> as it is, should be a value like "api://<code>&lt;application id&gt;</code>" and click <strong>Save and
    continue</strong>.</li>
<li>In the next windows set the following values:<ul>
<li>Set <strong>Scope name</strong> to "api_access"</li>
<li>Set <strong>Who can consent?</strong> to "Admin and users"</li>
<li>Set <strong>Admin consent display name</strong> to "twinsphere API access"</li>
<li>Set <strong>Admin consent description</strong> to "Allow the application to access the twinsphere API on behalf of the</li>
<li>signed-in user."</li>
<li>Set <strong>User consent display name</strong> to "twinsphere API access"</li>
<li>Set <strong>User consent description</strong> to "Allow the application to access the twinsphere API on your behalf."</li>
<li>Click <strong>Add scope</strong></li>
</ul>
</li>
<li>Under <strong>Entra ID &gt; Identity &gt; Applications</strong> in the side menu, click <strong>Enterprise applications</strong></li>
<li>Search for your application (e.g. <strong>twinsphere-api-app</strong>) and open it.</li>
<li>Click <strong>Users and groups</strong>.</li>
<li>Click <strong>Add user/group</strong> to add users or groups to the twinsphere roles.</li>
</ol>
<p>Please provide the noted information to the twinsphere <a href="../contact/">support team</a> to change and update your tenant
configuration:</p>
<ul>
<li><strong>Application ID</strong></li>
<li><strong>Authority URL (Accounts in this organizational directory only)</strong></li>
</ul>
<h4 id="create-and-configure-app-registration-for-viewer-client">Create and configure app registration for viewer client</h4>
<ol>
<li>Under <strong>Identity &gt; Applications</strong> in the side menu, click <strong>App registrations &gt; New Registration</strong>. Enter a
   descriptive name e.g. <strong>twinsphere-viewer-client-app</strong></li>
<li>As <strong>Supported account types</strong> let the default setting <strong>Accounts in this organizational directory only</strong>.</li>
<li>Under <strong>Redirect URI</strong>, select the platform <strong>Web</strong>.</li>
<li>Add the following redirect URL:<ul>
<li><code>https://viewer.&lt;friendly-tenant-name|tenant-tag&gt;.&lt;cloud|dedicated&gt;.twinsphere.io/signin-oidc-entra-id</code></li>
<li>Replace <code>&lt;friendly-tenant-name|tenant-tag&gt;</code> with your friendly tenant name, if you use one or use your tenant-tag.</li>
<li>Replace <code>&lt;cloud|dedicated&gt;</code> with your corresponding type. It's basically the base URL of the viewer app you use
  with a route postfix <code>/signin-oidc-entra-id</code>.</li>
<li>If you don't know which URL to add here, please ask our <a href="../contact/">support team</a></li>
</ul>
</li>
<li>Then click Register. The app's Overview page opens.</li>
<li>Note the <strong>Application ID</strong>.</li>
<li>Click on <strong>Manifest</strong> and in the Tab <strong>Microsoft Graph App Manifest</strong> change the property
   <strong>requestedAccessTokenVersion</strong> in the json (under <code>api</code>) editor to <strong>2</strong> and hit the <strong>Save</strong> button.</li>
<li>
<p>Click on <strong>Certificates &amp; secrets</strong> in the side menu, then add a new entry under Client secrets with the following
   configuration.</p>
<ul>
<li>Description: twinsphere viewer client OAuth</li>
<li>Expires: Select an expiration period of <strong>365 days</strong></li>
</ul>
</li>
<li>
<p>Click <strong>Add</strong> then copy and note the secret value. This is the OAuth client secret.</p>
<blockquote>
<p>The secret is needed, because the viewer acts as confidential OAuth client (web app which authenticates) unlike a
public client (e.g. mobile client) which could not store a secret securely.</p>
</blockquote>
</li>
<li>
<p>Click on <strong>API permissions</strong> in the side menu, then click <strong>Add a permission</strong>.</p>
</li>
<li>In the opened window click <strong>APIs my organization uses</strong> and select the API application you previously created for
    the twinsphere API.</li>
<li>Click on <strong>Delegated permissions</strong> and select the <strong>api_access</strong> permission.</li>
<li>Click on top on <strong>Application permissions</strong> and select all listed permissions.</li>
<li>Click <strong>Add permissions</strong></li>
<li>In the top of the API permissions list click <strong>Grant admin consent for <code>&lt;your tenant&gt;</code></strong></li>
<li>Under <strong>Identity &gt; Applications</strong> in the side menu, click <strong>App registrations</strong></li>
<li>Search and select the twinsphere API application.</li>
<li>Click <strong>Expose and API</strong> under <strong>Manage</strong> section.</li>
<li>Click <strong>Add a client application</strong></li>
<li>Set <strong>Client ID</strong> to the ID of the viewer app registration and select the <strong>Authorized scopes</strong> checkbox.</li>
<li>Click <strong>Add application</strong>.</li>
</ol>
<p>Please provide the noted information to the twinsphere <a href="../contact/">support team</a> to change and update your tenant
configuration:</p>
<ul>
<li><strong>Application ID</strong></li>
<li><strong>Client Secret</strong> and it's expiration date, in order to plan an update in a timely manner</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../cloud-file-filter-queries/" class="btn btn-neutral float-left" title="File Filter Queries"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../cloud-client-generation/" class="btn btn-neutral float-right" title="Client Generation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2025 <a href="https://www.conplement.de/twinsphere" taget="_blank">conplement AG</a></p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../cloud-file-filter-queries/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cloud-client-generation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
      <script src="../js/open_in_new_tab.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
